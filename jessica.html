<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jessica - Secretary</title>

<style>
  body {
    font-family: Arial;
    background:#111;
    color:#eee;
    text-align:center;
    padding:20px;
  }
  .tabs {
    display:flex;
    justify-content:center;
    gap:20px;
    margin-bottom:20px;
  }
  .tab {
    cursor:pointer;
    padding:5px 10px;
    border-bottom:2px solid transparent;
  }
  .tab.active {
    border-bottom:2px solid #0f0;
  }
  .tab-content {
    display:none;
    margin-top:20px;
  }
  .tab-content.active {
    display:block;
  }
  ul {
    list-style:none;
    padding:0;
  }
  li {
    margin:8px 0;
  }
  button {
    margin-left:6px;
    cursor:pointer;
  }
  .completed-section {
    margin-top:30px;
    border-top:1px solid #555;
    padding-top:20px;
  }
</style>
</head>

<body>

<h1>Jessica â€” Secretary</h1>
<img src="avatars/jessica.jpg" alt="Jessica"
     style="width:120px;height:120px;border-radius:50%;margin-bottom:20px;">

<!-- Tabs -->
<div class="tabs">
  <div class="tab active" data-tab="ai">AI Chat</div>
  <div class="tab" data-tab="goals">Goals</div>
  <div class="tab" data-tab="todo">To-Do</div>
  <div class="tab" data-tab="schedule">Schedule</div>
</div>

<!-- AI Chat -->
<div id="ai" class="tab-content active">
  <input id="jessicaInput" placeholder="Say something..." />
  <button id="jessicaSend">Send</button>
  <div id="jessicaOutput" style="margin-top:20px;"></div>
</div>

<!-- Goals -->
<div id="goals" class="tab-content">
  <input id="jessicaGoalInput" placeholder="Add a goal..." />
  <button id="jessicaAddGoal">Add</button>
  <ul id="jessicaGoalList"></ul>
</div>

<!-- To-Do -->
<div id="todo" class="tab-content">

  <input id="jessicaTodoInput" placeholder="Add a task..." />
  <select id="jessicaTodoPriority">
    <option value="4">4 â€” Critical</option>
    <option value="3">3 â€” High</option>
    <option value="2">2 â€” Medium</option>
    <option value="1">1 â€” Low</option>
  </select>
  <button id="jessicaAddTodo">Add</button>

  <ul id="jessicaTodoList"></ul>

  <div class="completed-section">
    <h3>Completed Tasks</h3>
    <ul id="jessicaCompletedList"></ul>

    <!-- Stats -->
    <div style="margin-top:20px;">
      <strong>Task Progress</strong>
      <div style="background:#333;height:14px;border-radius:7px;margin:10px auto;width:80%;">
        <div id="taskProgressBar"
             style="height:14px;width:0%;background:#0f0;border-radius:7px;"></div>
      </div>
      <div id="taskProgressText" style="font-size:14px;"></div>
    </div>
  </div>
</div>

<!-- Schedule -->
<div id="schedule" class="tab-content">
  <input id="jessicaEventInput" placeholder="Add an event..." />
  <input type="time" id="jessicaTimeInput" />
  <button id="jessicaAddEvent">Add</button>
  <ul id="jessicaScheduleList"></ul>
</div>

<script>
/* ---------- Tabs ---------- */
document.querySelectorAll('.tab').forEach(tab=>{
  tab.onclick=()=>{
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById(tab.dataset.tab).classList.add('active');
  };
});

/* ---------- AI Chat ---------- */
let memory = JSON.parse(localStorage.getItem('jessicaMemory')) || [];
jessicaSend.onclick=()=>{
  if(!jessicaInput.value.trim()) return;
  const text=jessicaInput.value.toLowerCase();
  const found=memory.find(m=>m.i===text);
  if(found) jessicaOutput.textContent=found.o;
  else {
    const reply=prompt(`Jessica doesn't know how to reply. What should she say?`);
    if(reply){
      memory.push({i:text,o:reply});
      localStorage.setItem('jessicaMemory',JSON.stringify(memory));
      jessicaOutput.textContent=reply;
    }
  }
  jessicaInput.value='';
};

/* ---------- Goals ---------- */
let goals=JSON.parse(localStorage.getItem('jessicaGoals'))||[];
function renderGoals(){
  jessicaGoalList.innerHTML='';
  goals.forEach((g,i)=>{
    const li=document.createElement('li');
    li.textContent=g;
    const del=document.createElement('button');
    del.textContent='âŒ';
    del.onclick=()=>{goals.splice(i,1);saveGoals();};
    li.appendChild(del);
    jessicaGoalList.appendChild(li);
  });
}
function saveGoals(){
  localStorage.setItem('jessicaGoals',JSON.stringify(goals));
  renderGoals();
}
jessicaAddGoal.onclick=()=>{
  if(!jessicaGoalInput.value.trim())return;
  goals.push(jessicaGoalInput.value);
  jessicaGoalInput.value='';
  saveGoals();
};
renderGoals();

/* ---------- To-Do ---------- */
let todos=JSON.parse(localStorage.getItem('jessicaTodos'))||[];
let completed=JSON.parse(localStorage.getItem('jessicaCompleted'))||[];

function renderTodos(){
  jessicaTodoList.innerHTML='';
  jessicaCompletedList.innerHTML='';

  // SORT by priority (high â†’ low)
  const sortedTodos=[...todos].sort((a,b)=>b.priority-a.priority);

  sortedTodos.forEach(t=>{
    const index=todos.indexOf(t);
    const li=document.createElement('li');
    li.textContent=`[${t.priority}] ${t.text}`;

    const done=document.createElement('button');
    done.textContent='âœ…';
    done.onclick=()=>{
      const note=prompt("Completion note (optional):","");
      completed.push({...t,note,completedAt:new Date().toLocaleString()});
      todos.splice(index,1);
      saveTodos();
    };

    const edit=document.createElement('button');
    edit.textContent='âœï¸';
    edit.onclick=()=>{
      const nt=prompt("Edit task:",t.text);
      const np=prompt("Edit priority (1â€“4):",t.priority);
      if(nt && ['1','2','3','4'].includes(np)){
        t.text=nt;
        t.priority=np;
        saveTodos();
      }
    };

    const del=document.createElement('button');
    del.textContent='ðŸ—‘ï¸';
    del.onclick=()=>{
      if(confirm("Delete this task?")){
        todos.splice(index,1);
        saveTodos();
      }
    };

    li.append(done,edit,del);
    jessicaTodoList.appendChild(li);
  });

  completed.forEach(t=>{
    const li=document.createElement('li');
    li.textContent=`[${t.priority}] ${t.text}${t.note?' â€” '+t.note:''}`;
    jessicaCompletedList.appendChild(li);
  });

  const total=todos.length+completed.length;
  const pct=total?Math.round((completed.length/total)*100):0;
  taskProgressBar.style.width=pct+'%';
  taskProgressText.textContent=
    `${completed.length} completed â€¢ ${todos.length} remaining â€¢ ${total} total (${pct}%)`;
}

function saveTodos(){
  localStorage.setItem('jessicaTodos',JSON.stringify(todos));
  localStorage.setItem('jessicaCompleted',JSON.stringify(completed));
  renderTodos();
}

jessicaAddTodo.onclick=()=>{
  if(!jessicaTodoInput.value.trim())return;
  todos.push({text:jessicaTodoInput.value,priority:jessicaTodoPriority.value});
  jessicaTodoInput.value='';
  saveTodos();
};
renderTodos();

/* ---------- Schedule ---------- */
let schedule=JSON.parse(localStorage.getItem('jessicaSchedule'))||[];
function renderSchedule(){
  jessicaScheduleList.innerHTML='';
  schedule.forEach((e,i)=>{
    const li=document.createElement('li');
    li.textContent=`${e.time} â€” ${e.name}`;
    const del=document.createElement('button');
    del.textContent='âŒ';
    del.onclick=()=>{schedule.splice(i,1);saveSchedule();};
    li.appendChild(del);
    jessicaScheduleList.appendChild(li);
  });
}
function saveSchedule(){
  localStorage.setItem('jessicaSchedule',JSON.stringify(schedule));
  renderSchedule();
}
jessicaAddEvent.onclick=()=>{
  if(!jessicaEventInput.value||!jessicaTimeInput.value)return;
  schedule.push({name:jessicaEventInput.value,time:jessicaTimeInput.value});
  jessicaEventInput.value='';
  jessicaTimeInput.value='';
  saveSchedule();
};
renderSchedule();
</script>

</body>
</html>
